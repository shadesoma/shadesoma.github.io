{"version":3,"sources":["view/components/common/delimiter/delimiter.tsx","assets/icons/back-arrow.svg","view/components/common/navigation-header/navigation-header.tsx","assets/icons/logo.png","../node_modules/@material-ui/core/esm/utils/createSvgIcon.js","utils/date.js","../node_modules/@material-ui/icons/esm/Computer.js","view/components/common/lists/lists.tsx","view/components/common/lists/list-items/list-items.tsx","view/components/common/lists/list-item/list-item.tsx","../node_modules/@material-ui/icons/esm/Print.js","view/components/waybills-page/waybills-list-page.tsx","view/components/waybills-page/waybills-list-page-container.tsx","routes/waybills/waybills-lists.tsx"],"names":["Delimiter","style","width","border","NavigationHeader","children","useReactPWAInstall","pwaInstall","supported","isInstalled","location","window","pathname","className","height","display","alignItems","justifyContent","src","arrow","alt","onClick","history","back","Typography","Button","title","logo","description","then","alert","Computer","createSvgIcon","path","displayName","Component","props","ref","React","createElement","SvgIcon","_extends","muiName","memo","forwardRef","dateToLocalTime","time","x","Date","currentTimeZoneOffsetInHours","getTimezoneOffset","prototype","addHours","h","this","setHours","getHours","toISOString","split","onlyLocalDate","date","d","Lists","ListItems","ListItem","WaybillsListPage","useState","waybillsList","setWaybillsList","value","setValue","load","setLoad","frameRef","createRef","getCheckupsList","a","httpFetch","get","baseUrl","res","data","useEffect","id","onScroll","el","document","getElementById","scrollTop","scrollHeight","offsetHeight","length","map","item","to","attributes","datetime","e","preventDefault","token","tokenStorage","getToken","fetch","method","headers","Authorization","doc","current","contentWindow","text","req","open","write","close","print","Print","color","hidden","WaybillsListPageContainer","WaybillsLists"],"mappings":"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","file":"static/js/6.78cf0ff7.chunk.js","sourcesContent":["import React from 'react';\n\nconst Delimiter = () => {\n  return (\n    <>\n      <div style={{ width: '100%', border: '1px solid rgba(124, 147, 156, 0.62)' }} />\n      <div style={{ width: '100%', border: '1px solid #FFFFFF' }} />\n    </>\n  );\n};\n\nexport default Delimiter;\n","export default __webpack_public_path__ + \"static/media/back-arrow.3cc4fcb7.svg\";","import React from 'react';\nimport './navigation-header.css';\nimport arrow from '../../../../assets/icons/back-arrow.svg';\nimport Delimiter from '../delimiter/delimiter';\nimport { Button, Typography } from '@material-ui/core';\nimport { Computer } from '@material-ui/icons';\nimport { useReactPWAInstall } from 'react-pwa-install';\nimport myLogo from '../../../../assets/icons/logo.png';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst NavigationHeader = ({ children }: Props) => {\n  const { pwaInstall, supported, isInstalled } = useReactPWAInstall();\n  const location = window.location.pathname;\n\n  const handleClick = () => {\n    pwaInstall({\n      title: 'Установить приложение',\n      logo: myLogo,\n      description: 'Telemedic App',\n    }).then(() => alert('Приложение установленно или инструкция по установке прочитана'));\n  };\n  return (\n    <div className=\"navigation-header\">\n      <nav className=\"navigation-header-wrapper\">\n        <div\n          style={{\n            height: '100px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          {location !== '/home' && (\n            <img\n              className=\"navigation-header-image\"\n              src={arrow}\n              alt=\"arrow\"\n              onClick={() => {\n                window.history.back();\n              }}\n            />\n          )}\n        </div>\n        <div className=\"navigation-header-content\">\n          <Typography>{children}</Typography>\n        </div>\n        {supported() && !isInstalled() && (\n          <Button onClick={handleClick}>\n            <Computer />\n          </Button>\n        )}\n      </nav>\n      <Delimiter />\n    </div>\n  );\n};\n\nexport default NavigationHeader;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlwSFlzAAAsSgAALEoBd3p0TQAAAD9QTFRFR3BMAAAA/9FLAAAA7sQ+/Ms3AAAAAAAA/9JJ+s1ApIQk/9JM/9VN7sE0dl8ZAAAA/s04f2Yc/tJM/s89/tFHjhYgtQAAABB0Uk5TACJIDajzKzPz3WfIKs1RB9kkoP0AAAFhSURBVHja7d07doMwAEVBMALxsYEA+19r6FIJuiD5zK1dvLFEraqSJEnSX68w9FuW9UN43c5/T1vWTe+bv7/fMq+/PIT3uf/Y9zXT9v04BVdnMJ3z16w7CdPFBdqONfuOLX2JQgH7T0FIAoa9CMCQBPRrEfVJwF4GYP9ewFpIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAScBPoqd+DwAAAAAAAAAAAAAAAAAAAADwP4CnhgIAAAAAAAAAAAAAAAAAAAAA5Al4KgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDHAW0Z+9v0w5plANIPa4YyAOmnTccyAGMS0H1K2P/pkoB6LuAzbuc6CWjimL2gHWOTfmG5jnPmt+gzx+7iieslxjiGIdNjaIcwngOXq1fGm5h9TXXZUuc9v16qu5q6y3V9VzeVJElf1S9xHfxZqqmO1AAAAABJRU5ErkJggg==\"","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport SvgIcon from '../SvgIcon';\n/**\n * Private module reserved for @material-ui/x packages.\n */\n\nexport default function createSvgIcon(path, displayName) {\n  var Component = function Component(props, ref) {\n    return /*#__PURE__*/React.createElement(SvgIcon, _extends({\n      ref: ref\n    }, props), path);\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    // Need to set `displayName` on the inner component for React.memo.\n    // React prior to 16.14 ignores `displayName` on the wrapper.\n    Component.displayName = \"\".concat(displayName, \"Icon\");\n  }\n\n  Component.muiName = SvgIcon.muiName;\n  return /*#__PURE__*/React.memo( /*#__PURE__*/React.forwardRef(Component));\n}","export const dateToLocalTime = (time = '') => {\n  const x = new Date();\n  const currentTimeZoneOffsetInHours = (x.getTimezoneOffset() / 60) * -1;\n  Date.prototype.addHours = function (h) {\n    this.setHours(this.getHours() + h);\n    return this;\n  };\n  return `\n  ${new Date(time).addHours(currentTimeZoneOffsetInHours).toISOString().split('T')[0].split('.')[0]}\n  ${\n    new Date(time).addHours(currentTimeZoneOffsetInHours).toISOString().split('T')[1].split('.')[0]\n  }`;\n};\n\nexport const onlyLocalDate = (date = '') => {\n  const x = new Date();\n  const currentTimeZoneOffsetInHours = (x.getTimezoneOffset() / 60) * -1;\n  Date.prototype.addHours = function (h) {\n    this.setHours(this.getHours() + h);\n    return this;\n  };\n  return `\n  ${\n    new Date(date).addHours(currentTimeZoneOffsetInHours).toISOString().split('T')[0].split('.')[0]\n  }`;\n};\n","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2h-4zM4 6h16v10H4V6z\"\n}), 'Computer');","import React from 'react';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst Lists = ({ children }: Props) => {\n  return <div className=\"list\">{children}</div>;\n};\n\nexport default Lists;\n","import React from 'react';\nimport './list-items.css';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst ListItems = ({ children }: Props) => {\n  return <div className=\"list-items\">{children}</div>;\n};\n\nexport default ListItems;\n","import React from 'react';\nimport './list-item.css';\n\ntype Props = {\n  children?: React.ReactNode;\n  style?: React.CSSProperties;\n};\n\nconst ListItem = ({ children, style }: Props) => {\n  return (\n    <div className=\"list-item\" style={style}>\n      {children}\n    </div>\n  );\n};\n\nexport default ListItem;\n","import * as React from 'react';\nimport createSvgIcon from './utils/createSvgIcon';\nexport default createSvgIcon( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z\"\n}), 'Print');","import React, { createRef, useEffect, useState } from 'react';\nimport './waybills-list-page.css';\nimport { Link } from 'react-router-dom';\nimport { Button, Typography } from '@material-ui/core';\nimport { httpFetch } from '../../../services/http-fetch';\nimport { onlyLocalDate } from '../../../utils/date';\nimport { baseUrl } from '../../../services/base-url';\nimport Spinner from '../common/spinner/spinner';\nimport { tokenStorage } from '../../../services/token-storage';\nimport { Print } from '@material-ui/icons';\nimport Lists from '../common/lists/lists';\nimport ListItem from '../common/lists/list-item/list-item';\nimport ListItems from '../common/lists/list-items/list-items';\nimport Delimiter from '../common/delimiter/delimiter';\nimport NavigationHeader from '../common/navigation-header/navigation-header';\n\nconst WaybillsListPage = () => {\n  const [waybillsList, setWaybillsList] = useState<any>([]);\n  const [value, setValue] = useState(10);\n  const [load, setLoad] = useState(false);\n  const frameRef = createRef<HTMLIFrameElement>();\n\n  const getCheckupsList = async () => {\n    const res = await httpFetch.get(`${baseUrl}/waybills?page[size]=${value}&sort=-id`);\n    setWaybillsList(res.data);\n    setLoad(false);\n  };\n\n  const handleScroll = () => {\n    const el = document.getElementById('wblist');\n    if (el) {\n      const scrollTop = el.scrollTop + 10;\n      const scrollBottom = el.scrollHeight - el.offsetHeight;\n      if (scrollTop >= scrollBottom) {\n        setValue(value + 10);\n        setLoad(true);\n        getCheckupsList();\n      }\n    }\n  };\n\n  useEffect(() => {\n    getCheckupsList();\n    setValue(value + 5);\n  }, []);\n\n  return (\n    <div id=\"wblist\" className=\"waybills-page\" onScroll={handleScroll}>\n      <NavigationHeader>Путевые листы</NavigationHeader>\n      <Lists>\n        {waybillsList &&\n          waybillsList.length > 0 &&\n          waybillsList.map((item: { id: number; attributes: any }) => {\n            return (\n              <Link key={item.id} to={`/waybills/${item.id}`} className=\"waybills-link\">\n                <ListItems>\n                  <ListItem>\n                    <label>Номер</label> <Typography>{item.id}</Typography>\n                  </ListItem>\n                  <ListItem>\n                    <label>Дата выдачи</label>\n                    <Typography>{onlyLocalDate(item.attributes.datetime)}</Typography>\n                  </ListItem>\n                  <ListItem>\n                    <Button\n                      onClick={async e => {\n                        e.preventDefault();\n                        const token = tokenStorage.getToken();\n                        const res = await fetch(`${baseUrl}/waybills/${item.id}/print`, {\n                          method: 'GET',\n                          headers: {\n                            'Content-Type': 'application/json',\n                            Authorization: 'Bearer ' + token,\n                          },\n                        });\n                        const doc = frameRef.current?.contentWindow;\n                        const req = await res.text();\n                        if (doc) {\n                          doc.document.open();\n                          doc.document.write(req);\n                          doc.document.close();\n                          doc.print();\n                        }\n                      }}\n                    >\n                      <Print color=\"action\" />\n                    </Button>\n                  </ListItem>\n                </ListItems>\n                <Delimiter />\n              </Link>\n            );\n          })}\n      </Lists>\n      {load && <Spinner />}\n      <iframe hidden ref={frameRef} />\n    </div>\n  );\n};\n\nexport default WaybillsListPage;\n","import React from 'react';\nimport WaybillsListPage from './waybills-list-page';\n\nconst WaybillsListPageContainer = () => {\n  return <WaybillsListPage />;\n};\n\nexport default WaybillsListPageContainer;\n","import React from 'react';\nimport WaybillsListPageContainer from '../../view/components/waybills-page/waybills-list-page-container';\n\nconst WaybillsLists = () => {\n  return <WaybillsListPageContainer />;\n};\n\nexport default WaybillsLists;\n"],"sourceRoot":""}