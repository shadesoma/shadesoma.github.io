{"version":3,"sources":["utils/css.ts","view/components/common/delimiter/delimiter.tsx","view/components/common/typography/typography.tsx","assets/icons/back-arrow.svg","view/components/common/navigation-header/navigation-header.tsx","assets/icons/logo.png","view/components/common/button/button.tsx","view/components/camera/camera.tsx","../node_modules/@material-ui/styles/esm/ThemeProvider/ThemeProvider.js","view/components/new-inspection-page/new-inspection-page.tsx","view/components/new-inspection-page/new-inspection-page-container.tsx","routes/new-inspection.tsx"],"names":["joinCssClasses","cssClasses","filter","Boolean","join","trim","Delimiter","style","width","border","Typography","props","children","component","Component","className","NavigationHeader","useReactPWAInstall","pwaInstall","supported","isInstalled","location","window","pathname","height","display","alignItems","justifyContent","src","arrow","alt","onClick","history","back","Button","title","logo","description","then","alert","Computer","href","color","otherProps","content","joinedClassName","e","preventDefault","document","type","Camera","changeHandler","userPhoto","multiplePhotoChangeHandler","fontSize","accept","capture","onChange","ThemeProvider","localTheme","theme","outerTheme","useTheme","React","useMemo","output","_extends","mergeOuterLocalTheme","nested","createElement","ThemeContext","Provider","value","useStyles","makeStyles","createStyles","formControl","margin","spacing","minWidth","maxWidth","background","borderRadius","label","selectEmpty","marginTop","createMuiTheme","palette","secondary","green","NewInspectionPage","inspectionPoints","handleSubmit","handleChange","selectHandleChange","photoChangeHandler","vehicles","setDateChange","selectedDate","setValueSignature","error","setValueData","disable","classes","canvas","querySelector","signaturePad","useEffect","SignaturePad","backgroundColor","onEnd","toDataURL","onSubmit","ctx","getContext","clearRect","FormControl","variant","InputLabel","id","Select","labelId","name","required","MenuItem","vehicle_id","map","vehicle","inspection_point_id","DateTimePicker","ampm","format","inputVariant","newValue","datetime","toISOString","TextField","mileage","driver_photo_file","vehicle_photo_files","item","index","disabled","NewInspectionPageContainer","useHistory","user","useContext","UserContext","useState","organization_id","organizations","driver_id","signature_file","undefined","setValue","setVehicles","setInspectionPoints","setError","setDisable","valueText","setValueText","getVehicles","a","httpFetch","get","baseUrl","res","data","getInspectionPoints","setTimeout","post","attributes","length","push","error_description","reload","values","signature","event","target","Number","currentTarget","file","files","reader","FileReader","readAsDataURL","onload","result","NewInspection"],"mappings":"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","file":"static/js/9.358701b4.chunk.js","sourcesContent":["export default function joinCssClasses(...cssClasses: (string | boolean | undefined)[]): string {\n  return cssClasses.filter(Boolean).join(' ').trim();\n}\n","import React from 'react';\n\nconst Delimiter = () => {\n  return (\n    <>\n      <div style={{ width: '100%', border: '1px solid rgba(124, 147, 156, 0.62)' }} />\n      <div style={{ width: '100%', border: '1px solid #FFFFFF' }} />\n    </>\n  );\n};\n\nexport default Delimiter;\n","import React from 'react';\nimport joinCssClasses from '../../../../utils/css';\n\ntype Props = {\n  children?: React.ReactNode;\n  className?: string;\n  component?: 'p' | 'h1';\n  size?: 'small' | 'medium' | 'large';\n  style?: React.CSSProperties;\n};\n\nconst Typography = (props: Props) => {\n  const { children, component: Component = 'p', className, style } = props;\n\n  return (\n    <Component style={style} className={joinCssClasses(className)}>\n      {children}\n    </Component>\n  );\n};\n\nexport default Typography;\n","export default __webpack_public_path__ + \"static/media/back-arrow.3cc4fcb7.svg\";","import React from 'react';\nimport './navigation-header.css';\nimport arrow from '../../../../assets/icons/back-arrow.svg';\nimport Delimiter from '../delimiter/delimiter';\nimport { Button, Typography } from '@material-ui/core';\nimport { Computer } from '@material-ui/icons';\nimport { useReactPWAInstall } from 'react-pwa-install';\nimport myLogo from '../../../../assets/icons/logo.png';\n\ntype Props = {\n  children: React.ReactNode;\n};\n\nconst NavigationHeader = ({ children }: Props) => {\n  const { pwaInstall, supported, isInstalled } = useReactPWAInstall();\n  const location = window.location.pathname;\n\n  const handleClick = () => {\n    pwaInstall({\n      title: 'Установить приложение',\n      logo: myLogo,\n      description: 'Telemedic App',\n    }).then(() => alert('Приложение установленно или инструкция по установке прочитана'));\n  };\n  return (\n    <div className=\"navigation-header\">\n      <nav className=\"navigation-header-wrapper\">\n        <div\n          style={{\n            height: '100px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n          }}\n        >\n          {location !== '/home' && (\n            <img\n              className=\"navigation-header-image\"\n              src={arrow}\n              alt=\"arrow\"\n              onClick={() => {\n                window.history.back();\n              }}\n            />\n          )}\n        </div>\n        <div className=\"navigation-header-content\">\n          <Typography>{children}</Typography>\n        </div>\n        {supported() && !isInstalled() && (\n          <Button onClick={handleClick}>\n            <Computer />\n          </Button>\n        )}\n      </nav>\n      <Delimiter />\n    </div>\n  );\n};\n\nexport default NavigationHeader;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlwSFlzAAAsSgAALEoBd3p0TQAAAD9QTFRFR3BMAAAA/9FLAAAA7sQ+/Ms3AAAAAAAA/9JJ+s1ApIQk/9JM/9VN7sE0dl8ZAAAA/s04f2Yc/tJM/s89/tFHjhYgtQAAABB0Uk5TACJIDajzKzPz3WfIKs1RB9kkoP0AAAFhSURBVHja7d07doMwAEVBMALxsYEA+19r6FIJuiD5zK1dvLFEraqSJEnSX68w9FuW9UN43c5/T1vWTe+bv7/fMq+/PIT3uf/Y9zXT9v04BVdnMJ3z16w7CdPFBdqONfuOLX2JQgH7T0FIAoa9CMCQBPRrEfVJwF4GYP9ewFpIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAScBPoqd+DwAAAAAAAAAAAAAAAAAAAADwP4CnhgIAAAAAAAAAAAAAAAAAAAAA5Al4KgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDHAW0Z+9v0w5plANIPa4YyAOmnTccyAGMS0H1K2P/pkoB6LuAzbuc6CWjimL2gHWOTfmG5jnPmt+gzx+7iieslxjiGIdNjaIcwngOXq1fGm5h9TXXZUuc9v16qu5q6y3V9VzeVJElf1S9xHfxZqqmO1AAAAABJRU5ErkJggg==\"","import React from 'react';\nimport './button.css';\nimport joinCssClasses from '../../../../utils/css';\nimport Typography from '../typography/typography';\n\ntype Props = React.DetailedHTMLProps<\n  React.ButtonHTMLAttributes<HTMLButtonElement>,\n  HTMLButtonElement\n> & { component?: 'div' | 'button' | 'input' | 'a'; href?: string };\n\nexport const Button = (props: Props) => {\n  const {\n    children,\n    className,\n    component: Component = 'button',\n    href,\n    color,\n    ...otherProps\n  } = props;\n\n  const handleClick = (e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    if (href) {\n      document.location.href = href;\n    }\n  };\n\n  const content =\n    typeof children === 'string' ? (\n      <Typography className=\"button__title\">{children}</Typography>\n    ) : (\n      children\n    );\n  const joinedClassName = joinCssClasses('button', color, className);\n  if (Component === 'a') {\n    return (\n      <a className={joinedClassName} href={href} onClick={handleClick}>\n        {content}\n      </a>\n    );\n  }\n\n  if (Component !== 'button') {\n    return <Component className={joinedClassName}>{content}</Component>;\n  }\n\n  return (\n    <button type=\"button\" className={joinedClassName} {...otherProps}>\n      {content}\n    </button>\n  );\n};\n","import React from 'react';\nimport './camera.css';\nimport { CameraAltOutlined } from '@material-ui/icons';\nimport joinCssClasses from '../../../utils/css';\n\ntype Props = {\n  className?: string;\n  changeHandler?: (e: React.FormEvent<HTMLInputElement>) => void;\n  userPhoto?: string;\n  multiplePhotoChangeHandler?: (e: React.FormEvent<HTMLInputElement>) => void;\n};\n\nconst Camera = ({ className, changeHandler, userPhoto, multiplePhotoChangeHandler }: Props) => {\n  return (\n    <div className={joinCssClasses('camera', className)}>\n      {multiplePhotoChangeHandler ? (\n        <>\n          {!userPhoto && (\n            <label className=\"label\">\n              <CameraAltOutlined style={{ fontSize: 60 }} />\n              <input\n                className=\"photo\"\n                type=\"file\"\n                accept=\"image/*\"\n                capture=\"camera\"\n                onChange={multiplePhotoChangeHandler}\n              />\n            </label>\n          )}\n          {userPhoto && (\n            <label className=\"label\">\n              <img src={userPhoto} alt=\"photo1\" width=\"60px\" height=\"50px\" />\n              <input\n                className=\"photo\"\n                type=\"file\"\n                accept=\"image/*\"\n                capture=\"camera\"\n                onChange={multiplePhotoChangeHandler}\n              />\n            </label>\n          )}\n        </>\n      ) : (\n        <>\n          {!userPhoto && (\n            <label className=\"label\">\n              <CameraAltOutlined style={{ fontSize: 60 }} />\n              <input\n                className=\"photo\"\n                type=\"file\"\n                accept=\"image/*\"\n                capture=\"camera\"\n                onChange={changeHandler}\n              />\n            </label>\n          )}\n          {userPhoto && (\n            <label className=\"label\">\n              <img src={userPhoto} alt=\"photo1\" width=\"60px\" height=\"50px\" />\n              <input\n                className=\"photo\"\n                type=\"file\"\n                accept=\"image/*\"\n                capture=\"camera\"\n                onChange={changeHandler}\n              />\n            </label>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\nexport default Camera;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { exactProp } from '@material-ui/utils';\nimport ThemeContext from '../useTheme/ThemeContext';\nimport useTheme from '../useTheme';\nimport nested from './nested'; // To support composition of theme.\n\nfunction mergeOuterLocalTheme(outerTheme, localTheme) {\n  if (typeof localTheme === 'function') {\n    var mergedTheme = localTheme(outerTheme);\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!mergedTheme) {\n        console.error(['Material-UI: You should return an object from your theme function, i.e.', '<ThemeProvider theme={() => ({})} />'].join('\\n'));\n      }\n    }\n\n    return mergedTheme;\n  }\n\n  return _extends({}, outerTheme, localTheme);\n}\n/**\n * This component takes a `theme` prop.\n * It makes the `theme` available down the React tree thanks to React context.\n * This component should preferably be used at **the root of your component tree**.\n */\n\n\nfunction ThemeProvider(props) {\n  var children = props.children,\n      localTheme = props.theme;\n  var outerTheme = useTheme();\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (outerTheme === null && typeof localTheme === 'function') {\n      console.error(['Material-UI: You are providing a theme function prop to the ThemeProvider component:', '<ThemeProvider theme={outerTheme => outerTheme} />', '', 'However, no outer theme is present.', 'Make sure a theme is already injected higher in the React tree ' + 'or provide a theme object.'].join('\\n'));\n    }\n  }\n\n  var theme = React.useMemo(function () {\n    var output = outerTheme === null ? localTheme : mergeOuterLocalTheme(outerTheme, localTheme);\n\n    if (output != null) {\n      output[nested] = outerTheme !== null;\n    }\n\n    return output;\n  }, [localTheme, outerTheme]);\n  return /*#__PURE__*/React.createElement(ThemeContext.Provider, {\n    value: theme\n  }, children);\n}\n\nprocess.env.NODE_ENV !== \"production\" ? ThemeProvider.propTypes = {\n  /**\n   * Your component tree.\n   */\n  children: PropTypes.node.isRequired,\n\n  /**\n   * A theme object. You can provide a function to extend the outer theme.\n   */\n  theme: PropTypes.oneOfType([PropTypes.object, PropTypes.func]).isRequired\n} : void 0;\n\nif (process.env.NODE_ENV !== 'production') {\n  process.env.NODE_ENV !== \"production\" ? ThemeProvider.propTypes = exactProp(ThemeProvider.propTypes) : void 0;\n}\n\nexport default ThemeProvider;","import React, { useEffect } from 'react';\nimport './new-inspection-page.css';\nimport Camera from '../camera/camera';\nimport {\n  createMuiTheme,\n  createStyles,\n  FormControl,\n  InputLabel,\n  makeStyles,\n  MenuItem,\n  MuiThemeProvider,\n  Select,\n  Theme,\n  TextField,\n} from '@material-ui/core';\nimport { green } from '@material-ui/core/colors';\nimport { DateTimePicker } from '@material-ui/pickers';\nimport { WaybillsData } from './new-inspection-page-container';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport SignaturePad from 'signature_pad';\nimport { Button } from '../common/button/button';\nimport NavigationHeader from '../common/navigation-header/navigation-header';\nimport Typography from '../common/typography/typography';\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    formControl: {\n      width: '100%',\n      margin: theme.spacing(1),\n      minWidth: 250,\n      maxWidth: 300,\n      background: 'white',\n      borderRadius: 20,\n    },\n    label: {\n      color: '#7C939C',\n    },\n    selectEmpty: {\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nconst theme = createMuiTheme({\n  palette: {\n    secondary: green,\n  },\n});\n\ntype Props = {\n  value: WaybillsData;\n  setValueData: (values: WaybillsData) => void;\n  setValueSignature: (values: string) => void;\n  handleSubmit: (e: React.FormEvent<HTMLFormElement>) => void;\n  selectHandleChange: (event: React.ChangeEvent<{ name?: string; value: unknown }>) => void;\n  handleChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n  vehicles: { id: number; name: string }[];\n  inspectionPoints: { id: number; name: string }[];\n  photoChangeHandler: (e: React.FormEvent<HTMLInputElement>) => void;\n  multiplePhotoChangeHandler: (e: React.FormEvent<HTMLInputElement>) => void;\n  setDateChange: React.Dispatch<React.SetStateAction<MaterialUiPickersDate>>;\n  selectedDate: MaterialUiPickersDate;\n  error: boolean;\n  disable: boolean;\n};\n\nconst NewInspectionPage = ({\n  value,\n  inspectionPoints,\n  handleSubmit,\n  handleChange,\n  selectHandleChange,\n  multiplePhotoChangeHandler,\n  photoChangeHandler,\n  vehicles,\n  setDateChange,\n  selectedDate,\n  setValueSignature,\n  error,\n  setValueData,\n  disable,\n}: Props) => {\n  const classes = useStyles();\n  let canvas: HTMLCanvasElement | null = document.querySelector('canvas');\n  let signaturePad: SignaturePad | null = null;\n\n  useEffect(() => {\n    canvas = document.querySelector('canvas');\n    signaturePad = canvas\n      ? new SignaturePad(canvas, { backgroundColor: 'rgb(255,255,255)' })\n      : null;\n    if (signaturePad) {\n      signaturePad.onEnd = () => {\n        if (signaturePad) {\n          setValueSignature(signaturePad.toDataURL('image/jpeg'));\n        }\n      };\n    }\n  }, [canvas, signaturePad]);\n\n  return (\n    <div className=\"new-inspection\">\n      <NavigationHeader>Новый осмотр</NavigationHeader>\n      <form\n        onSubmit={e => {\n          handleSubmit(e);\n        }}\n      >\n        <div style={{ margin: '0 0 10px 0' }}>\n          <Typography className=\"new-inspection-text\">Ваша подпись</Typography>\n          <canvas style={{ borderRadius: '20px', width: '300px', background: 'white' }} />\n          <div style={{ display: 'flex' }}>\n            <Button\n              onClick={() => {\n                if (canvas) {\n                  const ctx = canvas.getContext('2d');\n                  if (ctx) {\n                    ctx.clearRect(0, 0, 300, 150);\n                  }\n                }\n                setValueSignature('');\n              }}\n            >\n              Стереть\n            </Button>\n          </div>\n        </div>\n\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel id=\"demo-simple-select-outlined-label\">Вид смены</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            name=\"type\"\n            value={value.type}\n            onChange={selectHandleChange}\n            required\n          >\n            <MenuItem value=\"0\">Предрейсовый</MenuItem>\n            <MenuItem value=\"1\">Послерейсовый</MenuItem>\n          </Select>\n        </FormControl>\n\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel id=\"demo-simple-select-outlined-label\">Выбор автомобиля</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            name=\"vehicle_id\"\n            value={value.vehicle_id}\n            onChange={selectHandleChange}\n            label=\"Выбор автомобиля\"\n            required\n          >\n            {vehicles &&\n              vehicles.map(vehicle => (\n                <MenuItem key={vehicle.id} value={vehicle.id}>\n                  {vehicle.name}\n                </MenuItem>\n              ))}\n          </Select>\n        </FormControl>\n        <FormControl variant=\"outlined\" className={classes.formControl}>\n          <InputLabel id=\"demo-simple-select-outlined-label\">Выборите пункт осмотра</InputLabel>\n          <Select\n            labelId=\"demo-simple-select-outlined-label\"\n            id=\"demo-simple-select-outlined\"\n            name=\"inspection_point_id\"\n            value={value.inspection_point_id}\n            onChange={selectHandleChange}\n            label=\"Выборите пункт осмотра\"\n            required\n          >\n            {inspectionPoints &&\n              inspectionPoints.map(vehicle => (\n                <MenuItem key={vehicle.id} value={vehicle.id}>\n                  {vehicle.name}\n                </MenuItem>\n              ))}\n          </Select>\n        </FormControl>\n        <DateTimePicker\n          className={classes.formControl}\n          ampm={false}\n          format=\"d MMMM HH:mm\"\n          label=\"Выбор времени\"\n          inputVariant=\"outlined\"\n          value={selectedDate}\n          onChange={newValue => {\n            setDateChange(newValue);\n            setValueData({ ...value, datetime: newValue ? newValue.toISOString() : '' });\n          }}\n          error={error}\n        />\n        <TextField\n          id=\"organization-field\"\n          type=\"number\"\n          className={classes.formControl}\n          label=\"Введите пробег\"\n          variant=\"outlined\"\n          value={value.mileage}\n          onChange={handleChange}\n        />\n        <div className=\"new-inspection-camera\">\n          <Typography className=\"new-inspection-text\">1шт Фото водителя</Typography>\n          <Camera changeHandler={photoChangeHandler} userPhoto={value.driver_photo_file} />\n        </div>\n        <div className=\"new-inspection-camera\">\n          <Typography className=\"new-inspection-text\">4шт Фото автомобиля</Typography>\n          <Camera\n            multiplePhotoChangeHandler={multiplePhotoChangeHandler}\n            userPhoto={value.vehicle_photo_files[0]}\n          />\n          {value.vehicle_photo_files.map((item, index) => {\n            return (\n              <span key={index}>\n                {index !== 3 && (\n                  <>\n                    <Camera\n                      multiplePhotoChangeHandler={multiplePhotoChangeHandler}\n                      userPhoto={value.vehicle_photo_files[index + 1]}\n                    />\n                  </>\n                )}\n              </span>\n            );\n          })}\n        </div>\n        <div>\n          <MuiThemeProvider theme={theme}>\n            <Button type=\"submit\" color=\"primary\" disabled={disable}>\n              Забронировать\n            </Button>\n          </MuiThemeProvider>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default NewInspectionPage;\n","import React, { useContext, useEffect, useState } from 'react';\nimport NewInspectionPage from './new-inspection-page';\nimport { useHistory } from 'react-router-dom';\nimport { UserContext } from '../../App';\nimport { MaterialUiPickersDate } from '@material-ui/pickers/typings/date';\nimport { httpFetch } from '../../../services/http-fetch';\nimport { baseUrl } from '../../../services/base-url';\nimport Spinner from '../common/spinner/spinner';\n\nexport type WaybillsData = {\n  organization_id: number;\n  driver_id: number;\n  vehicle_id: string;\n  inspection_point_id: string;\n  signature_file: string;\n  datetime: string | null;\n  mileage?: number;\n  driver_photo_file: string;\n  vehicle_photo_files: string[];\n  type: string;\n};\n\nconst NewInspectionPageContainer = () => {\n  const history = useHistory();\n  const { user } = useContext(UserContext);\n  const [value, setValue] = useState<WaybillsData>({\n    organization_id: user.organizations[0],\n    driver_id: user.id,\n    vehicle_id: '',\n    inspection_point_id: '',\n    signature_file: '',\n    datetime: null,\n    mileage: undefined,\n    driver_photo_file: '',\n    vehicle_photo_files: [],\n    type: '',\n  });\n  const [selectedDate, setDateChange] = useState<MaterialUiPickersDate>(null);\n  const [vehicles, setVehicles] = useState<{ id: number; name: string }[]>([{ id: 0, name: '' }]);\n  const [inspectionPoints, setInspectionPoints] = useState<{ id: number; name: string }[]>([\n    { id: 0, name: '' },\n  ]);\n  const [error, setError] = useState(false);\n  const [disable, setDisable] = useState(false);\n  const [valueText, setValueText] = useState('Идёт отправка данных, подождите');\n\n  const getVehicles = async () => {\n    const res = await httpFetch.get(\n      `${baseUrl}/waybills/form/vehicles?organization_id=${user.organizations[0]}`,\n    );\n    if (res && res.data) {\n      setVehicles(res.data);\n    }\n  };\n\n  const setValueData = (values: WaybillsData) => {\n    setValue(values);\n  };\n\n  const getInspectionPoints = async () => {\n    const res = await httpFetch.get(\n      `${baseUrl}/waybills/form/inspection_points?organization_id=${user.organizations[0]}`,\n    );\n    if (res && res.data) {\n      setInspectionPoints(res.data);\n    }\n  };\n\n  useEffect(() => {\n    getVehicles();\n    getInspectionPoints();\n  }, []);\n\n  const selectHandleChange = (event: React.ChangeEvent<{ name?: string; value: unknown }>) => {\n    event.preventDefault();\n    const name = event.target.name;\n    if (name) {\n      setValue({ ...value, [name]: Number(event.target.value) });\n    }\n  };\n\n  const setValueSignature = (signature: string) => {\n    setValue({\n      ...value,\n      ['signature_file']: signature,\n    });\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    setValue({ ...value, ['mileage']: Number(e.currentTarget.value) });\n  };\n\n  const photoChangeHandler = (e: React.FormEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    const file = e.currentTarget.files ? e.currentTarget.files[0] : null;\n    const reader = new FileReader();\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n    reader.onload = () => {\n      setValue({ ...value, ['driver_photo_file']: `${reader.result}` });\n    };\n  };\n\n  const multiplePhotoChangeHandler = (e: React.FormEvent<HTMLInputElement>) => {\n    e.preventDefault();\n    const file = e.currentTarget.files ? e.currentTarget.files[0] : null;\n    const reader = new FileReader();\n    if (file) {\n      reader.readAsDataURL(file);\n    }\n    reader.onload = () => {\n      setValue({\n        ...value,\n        vehicle_photo_files: [...value.vehicle_photo_files, `${reader.result}`],\n      });\n    };\n  };\n\n  const checkRequest = () => {\n    setTimeout(() => {\n      setValueText('Долгая отправка формы. Проверьте соединение!');\n    }, 90000);\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    setDisable(true);\n    e.preventDefault();\n    checkRequest();\n    await httpFetch.post(`${baseUrl}/waybills`, { data: { attributes: value } }).then(data => {\n      if (selectedDate && value.datetime) {\n        if (value.mileage) {\n          if (value.driver_photo_file) {\n            if (value.vehicle_photo_files.length > 3) {\n              if (data?.data) {\n                const { id } = data.data;\n                history.push(`/waybills/${id}`);\n              } else {\n                if (\n                  data &&\n                  data.error_description &&\n                  data.error_description === 'Путевой лист уже открыт'\n                ) {\n                  alert('Путевой лист уже открыт');\n                  location.reload();\n                } else {\n                  alert(`Ошибка отправки формы: ${data.error_description}`);\n                  location.reload();\n                }\n              }\n            } else {\n              alert('Добавьте больше фото транспорного средцтва');\n              setDisable(false);\n            }\n          } else {\n            alert('Добавьте фото водителя');\n            setDisable(false);\n          }\n        } else {\n          alert('Добавьте пробег');\n          setDisable(false);\n        }\n      } else {\n        setError(true);\n        alert('Выберите дату');\n        setDisable(false);\n      }\n    });\n  };\n  return (\n    <>\n      <NewInspectionPage\n        value={value}\n        setValueData={setValueData}\n        setValueSignature={setValueSignature}\n        selectHandleChange={selectHandleChange}\n        handleChange={handleChange}\n        photoChangeHandler={photoChangeHandler}\n        multiplePhotoChangeHandler={multiplePhotoChangeHandler}\n        handleSubmit={handleSubmit}\n        setDateChange={setDateChange}\n        selectedDate={selectedDate}\n        vehicles={vehicles}\n        inspectionPoints={inspectionPoints}\n        error={error}\n        disable={disable}\n      />\n      {disable && <Spinner valueText={valueText} />}\n    </>\n  );\n};\n\nexport default NewInspectionPageContainer;\n","import React from 'react';\nimport NewInspectionPageContainer from '../view/components/new-inspection-page/new-inspection-page-container';\n\nconst NewInspection = () => {\n  return <NewInspectionPageContainer />;\n};\n\nexport default NewInspection;\n"],"sourceRoot":""}