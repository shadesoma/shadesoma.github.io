(this.webpackJsonptelemedic=this.webpackJsonptelemedic||[]).push([[9],{165:function(e,t,a){"use strict";function n(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ").trim()}a.d(t,"a",(function(){return n}))},166:function(e,t,a){"use strict";a(0);var n=a(6);t.a=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{style:{width:"100%",border:"1px solid rgba(124, 147, 156, 0.62)"}}),Object(n.jsx)("div",{style:{width:"100%",border:"1px solid #FFFFFF"}})]})}},168:function(e,t,a){"use strict";a(0);var n=a(165),c=a(6);t.a=function(e){var t=e.children,a=e.component,i=void 0===a?"p":a,l=e.className,r=e.style;return Object(c.jsx)(i,{style:r,className:Object(n.a)(l),children:t})}},169:function(e,t,a){},170:function(e,t,a){"use strict";a(0),a(169);var n=a.p+"static/media/back-arrow.3cc4fcb7.svg",c=a(166),i=a(128),l=a(156),r=a(184),s=a(60),o=a(6);t.a=function(e){var t=e.children,a=Object(s.b)(),u=a.pwaInstall,d=a.supported,A=a.isInstalled,j=window.location.pathname;return Object(o.jsxs)("div",{className:"navigation-header",children:[Object(o.jsxs)("nav",{className:"navigation-header-wrapper",children:[Object(o.jsx)("div",{style:{height:"100px",display:"flex",alignItems:"center",justifyContent:"center"},children:"/home"!==j&&Object(o.jsx)("img",{className:"navigation-header-image",src:n,alt:"arrow",onClick:function(){window.history.back()}})}),Object(o.jsx)("div",{className:"navigation-header-content",children:Object(o.jsx)(i.a,{children:t})}),d()&&!A()&&Object(o.jsx)(l.a,{onClick:function(){u({title:"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435",logo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAAlwSFlzAAAsSgAALEoBd3p0TQAAAD9QTFRFR3BMAAAA/9FLAAAA7sQ+/Ms3AAAAAAAA/9JJ+s1ApIQk/9JM/9VN7sE0dl8ZAAAA/s04f2Yc/tJM/s89/tFHjhYgtQAAABB0Uk5TACJIDajzKzPz3WfIKs1RB9kkoP0AAAFhSURBVHja7d07doMwAEVBMALxsYEA+19r6FIJuiD5zK1dvLFEraqSJEnSX68w9FuW9UN43c5/T1vWTe+bv7/fMq+/PIT3uf/Y9zXT9v04BVdnMJ3z16w7CdPFBdqONfuOLX2JQgH7T0FIAoa9CMCQBPRrEfVJwF4GYP9ewFpIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAScBPoqd+DwAAAAAAAAAAAAAAAAAAAADwP4CnhgIAAAAAAAAAAAAAAAAAAAAA5Al4KgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIDHAW0Z+9v0w5plANIPa4YyAOmnTccyAGMS0H1K2P/pkoB6LuAzbuc6CWjimL2gHWOTfmG5jnPmt+gzx+7iieslxjiGIdNjaIcwngOXq1fGm5h9TXXZUuc9v16qu5q6y3V9VzeVJElf1S9xHfxZqqmO1AAAAABJRU5ErkJggg==",description:"Telemedic App"}).then((function(){return alert("\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e \u0438\u043b\u0438 \u0438\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f \u043f\u043e \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0435 \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u043d\u0430")}))},children:Object(o.jsx)(r.a,{})})]}),Object(o.jsx)(c.a,{})]})}},178:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(167),c=a(5),i=(a(0),a(179),a(165)),l=a(168),r=a(6),s=["children","className","component","href","color"],o=function(e){var t=e.children,a=e.className,o=e.component,u=void 0===o?"button":o,d=e.href,A=e.color,j=Object(c.a)(e,s),b="string"===typeof t?Object(r.jsx)(l.a,{className:"button__title",children:t}):t,h=Object(i.a)("button",A,a);return"a"===u?Object(r.jsx)("a",{className:h,href:d,onClick:function(e){e.preventDefault(),d&&(document.location.href=d)},children:b}):"button"!==u?Object(r.jsx)(u,{className:h,children:b}):Object(r.jsx)("button",Object(n.a)(Object(n.a)({type:"button",className:h},j),{},{children:b}))}},179:function(e,t,a){},194:function(e,t,a){"use strict";a(0),a(195);var n=a(271),c=a(165),i=a(6);t.a=function(e){var t=e.className,a=e.changeHandler,l=e.userPhoto,r=e.multiplePhotoChangeHandler;return Object(i.jsx)("div",{className:Object(c.a)("camera",t),children:r?Object(i.jsxs)(i.Fragment,{children:[!l&&Object(i.jsxs)("label",{className:"label",children:[Object(i.jsx)(n.a,{style:{fontSize:60}}),Object(i.jsx)("input",{className:"photo",type:"file",accept:"image/*",capture:"camera",onChange:r})]}),l&&Object(i.jsxs)("label",{className:"label",children:[Object(i.jsx)("img",{src:l,alt:"photo1",width:"60px",height:"50px"}),Object(i.jsx)("input",{className:"photo",type:"file",accept:"image/*",capture:"camera",onChange:r})]})]}):Object(i.jsxs)(i.Fragment,{children:[!l&&Object(i.jsxs)("label",{className:"label",children:[Object(i.jsx)(n.a,{style:{fontSize:60}}),Object(i.jsx)("input",{className:"photo",type:"file",accept:"image/*",capture:"camera",onChange:a})]}),l&&Object(i.jsxs)("label",{className:"label",children:[Object(i.jsx)("img",{src:l,alt:"photo1",width:"60px",height:"50px"}),Object(i.jsx)("input",{className:"photo",type:"file",accept:"image/*",capture:"camera",onChange:a})]})]})})}},195:function(e,t,a){},221:function(e,t,a){"use strict";var n=a(1),c=a(0),i=a.n(c),l=(a(8),a(64)),r=a(130),s=a(65);t.a=function(e){var t=e.children,a=e.theme,c=Object(r.a)(),o=i.a.useMemo((function(){var e=null===c?a:function(e,t){return"function"===typeof t?t(e):Object(n.a)({},e,t)}(c,a);return null!=e&&(e[s.a]=null!==c),e}),[a,c]);return i.a.createElement(l.a.Provider,{value:o},t)}},244:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(25),i=a(17),l=a(167),r=a(38),s=a.n(r),o=a(51),u=a(32),d=(a(244),a(194)),A=a(245),j=a(277),b=a(75),h=a(268),m=a(269),p=a(274),f=a(217),O=a(275),v=a(221),g=a(50),x=a(273),w=a(209),C=a(178),y=a(170),_=a(168),N=a(6),F=Object(A.a)((function(e){return Object(j.a)({formControl:{width:"100%",margin:e.spacing(1),minWidth:250,maxWidth:300,background:"white",borderRadius:20},label:{color:"#7C939C"},selectEmpty:{marginTop:e.spacing(2)}})})),S=Object(b.a)({palette:{secondary:g.a}}),P=function(e){var t=e.value,a=e.inspectionPoints,c=e.handleSubmit,i=e.handleChange,r=e.selectHandleChange,s=e.multiplePhotoChangeHandler,o=e.photoChangeHandler,u=e.vehicles,A=e.setDateChange,j=e.selectedDate,b=e.setValueSignature,g=e.error,P=e.setValueData,D=e.disable,H=F(),T=document.querySelector("canvas"),k=null;return Object(n.useEffect)((function(){T=document.querySelector("canvas"),(k=T?new w.a(T,{backgroundColor:"rgb(255,255,255)"}):null)&&(k.onEnd=function(){k&&b(k.toDataURL("image/jpeg"))})}),[T,k]),Object(N.jsxs)("div",{className:"new-inspection",children:[Object(N.jsx)(y.a,{children:"\u041d\u043e\u0432\u044b\u0439 \u043e\u0441\u043c\u043e\u0442\u0440"}),Object(N.jsxs)("form",{onSubmit:function(e){c(e)},children:[Object(N.jsxs)("div",{style:{margin:"0 0 10px 0"},children:[Object(N.jsx)(_.a,{className:"new-inspection-text",children:"\u0412\u0430\u0448\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u044c"}),Object(N.jsx)("canvas",{style:{borderRadius:"20px",width:"300px",background:"white"}}),Object(N.jsx)("div",{style:{display:"flex"},children:Object(N.jsx)(C.a,{onClick:function(){if(T){var e=T.getContext("2d");e&&e.clearRect(0,0,300,150)}b("")},children:"\u0421\u0442\u0435\u0440\u0435\u0442\u044c"})})]}),Object(N.jsxs)(h.a,{variant:"outlined",className:H.formControl,children:[Object(N.jsx)(m.a,{id:"demo-simple-select-outlined-label",children:"\u0412\u0438\u0434 \u0441\u043c\u0435\u043d\u044b"}),Object(N.jsxs)(p.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"type",value:t.type,onChange:r,required:!0,children:[Object(N.jsx)(f.a,{value:"0",children:"\u041f\u0440\u0435\u0434\u0440\u0435\u0439\u0441\u043e\u0432\u044b\u0439"}),Object(N.jsx)(f.a,{value:"1",children:"\u041f\u043e\u0441\u043b\u0435\u0440\u0435\u0439\u0441\u043e\u0432\u044b\u0439"})]})]}),Object(N.jsxs)(h.a,{variant:"outlined",className:H.formControl,children:[Object(N.jsx)(m.a,{id:"demo-simple-select-outlined-label",children:"\u0412\u044b\u0431\u043e\u0440 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),Object(N.jsx)(p.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"vehicle_id",value:t.vehicle_id,onChange:r,label:"\u0412\u044b\u0431\u043e\u0440 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f",required:!0,children:u&&u.map((function(e){return Object(N.jsx)(f.a,{value:e.id,children:e.name},e.id)}))})]}),Object(N.jsxs)(h.a,{variant:"outlined",className:H.formControl,children:[Object(N.jsx)(m.a,{id:"demo-simple-select-outlined-label",children:"\u0412\u044b\u0431\u043e\u0440\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u043e\u0441\u043c\u043e\u0442\u0440\u0430"}),Object(N.jsx)(p.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"inspection_point_id",value:t.inspection_point_id,onChange:r,label:"\u0412\u044b\u0431\u043e\u0440\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u043e\u0441\u043c\u043e\u0442\u0440\u0430",required:!0,children:a&&a.map((function(e){return Object(N.jsx)(f.a,{value:e.id,children:e.name},e.id)}))})]}),Object(N.jsx)(x.a,{className:H.formControl,ampm:!1,format:"d MMMM HH:mm",label:"\u0412\u044b\u0431\u043e\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u0438",inputVariant:"outlined",value:j,onChange:function(e){A(e),P(Object(l.a)(Object(l.a)({},t),{},{datetime:e?e.toISOString():""}))},error:g}),Object(N.jsx)(O.a,{id:"organization-field",type:"number",className:H.formControl,label:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u043e\u0431\u0435\u0433",variant:"outlined",value:t.mileage,onChange:i}),Object(N.jsxs)("div",{className:"new-inspection-camera",children:[Object(N.jsx)(_.a,{className:"new-inspection-text",children:"1\u0448\u0442 \u0424\u043e\u0442\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"}),Object(N.jsx)(d.a,{changeHandler:o,userPhoto:t.driver_photo_file})]}),Object(N.jsxs)("div",{className:"new-inspection-camera",children:[Object(N.jsx)(_.a,{className:"new-inspection-text",children:"4\u0448\u0442 \u0424\u043e\u0442\u043e \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u044f"}),Object(N.jsx)(d.a,{multiplePhotoChangeHandler:s,userPhoto:t.vehicle_photo_files[0]}),t.vehicle_photo_files.map((function(e,a){return Object(N.jsx)("span",{children:3!==a&&Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(d.a,{multiplePhotoChangeHandler:s,userPhoto:t.vehicle_photo_files[a+1]})})},a)}))]}),Object(N.jsx)("div",{children:Object(N.jsx)(v.a,{theme:S,children:Object(N.jsx)(C.a,{type:"submit",color:"primary",disabled:D,children:"\u0417\u0430\u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})})})]})]})},D=a(10),H=a(66),T=a(61),k=a(59),z=a(53),I=function(){var e=Object(D.f)(),t=Object(n.useContext)(H.a).user,a=Object(n.useState)({organization_id:t.organizations[0],driver_id:t.id,vehicle_id:"",inspection_point_id:"",signature_file:"",datetime:null,mileage:void 0,driver_photo_file:"",vehicle_photo_files:[],type:""}),r=Object(u.a)(a,2),d=r[0],A=r[1],j=Object(n.useState)(null),b=Object(u.a)(j,2),h=b[0],m=b[1],p=Object(n.useState)([{id:0,name:""}]),f=Object(u.a)(p,2),O=f[0],v=f[1],g=Object(n.useState)([{id:0,name:""}]),x=Object(u.a)(g,2),w=x[0],C=x[1],y=Object(n.useState)(!1),_=Object(u.a)(y,2),F=_[0],S=_[1],I=Object(n.useState)(!1),B=Object(u.a)(I,2),M=B[0],R=B[1],J=Object(n.useState)("\u0418\u0434\u0451\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"),E=Object(u.a)(J,2),q=E[0],V=E[1],U=function(){var e=Object(o.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(k.a,"/waybills/form/vehicles?organization_id=").concat(t.organizations[0]));case 2:(a=e.sent)&&a.data&&v(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(k.a,"/waybills/form/inspection_points?organization_id=").concat(t.organizations[0]));case 2:(a=e.sent)&&a.data&&C(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){U(),L()}),[]);var W=function(){var t=Object(o.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return R(!0),a.preventDefault(),setTimeout((function(){V("\u0414\u043e\u043b\u0433\u0430\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u043e\u0440\u043c\u044b. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435!")}),9e4),t.next=5,T.a.post("".concat(k.a,"/waybills"),{data:{attributes:d}}).then((function(t){if(h&&d.datetime)if(d.mileage)if(d.driver_photo_file)if(d.vehicle_photo_files.length>3)if(null===t||void 0===t?void 0:t.data){var a=t.data.id;e.push("/waybills/".concat(a))}else t&&t.error_description&&"\u041f\u0443\u0442\u0435\u0432\u043e\u0439 \u043b\u0438\u0441\u0442 \u0443\u0436\u0435 \u043e\u0442\u043a\u0440\u044b\u0442"===t.error_description?(alert("\u041f\u0443\u0442\u0435\u0432\u043e\u0439 \u043b\u0438\u0441\u0442 \u0443\u0436\u0435 \u043e\u0442\u043a\u0440\u044b\u0442"),location.reload()):(alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0444\u043e\u0440\u043c\u044b: ".concat(t.error_description)),location.reload());else alert("\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0444\u043e\u0442\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u043d\u043e\u0433\u043e \u0441\u0440\u0435\u0434\u0446\u0442\u0432\u0430"),R(!1);else alert("\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0444\u043e\u0442\u043e \u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044f"),R(!1);else alert("\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043f\u0440\u043e\u0431\u0435\u0433"),R(!1);else S(!0),alert("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0430\u0442\u0443"),R(!1)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(P,{value:d,setValueData:function(e){A(e)},setValueSignature:function(e){A(Object(l.a)(Object(l.a)({},d),{},Object(i.a)({},"signature_file",e)))},selectHandleChange:function(e){e.preventDefault();var t=e.target.name;t&&A(Object(l.a)(Object(l.a)({},d),{},Object(i.a)({},t,Number(e.target.value))))},handleChange:function(e){e.preventDefault(),A(Object(l.a)(Object(l.a)({},d),{},Object(i.a)({},"mileage",Number(e.currentTarget.value))))},photoChangeHandler:function(e){e.preventDefault();var t=e.currentTarget.files?e.currentTarget.files[0]:null,a=new FileReader;t&&a.readAsDataURL(t),a.onload=function(){A(Object(l.a)(Object(l.a)({},d),{},Object(i.a)({},"driver_photo_file","".concat(a.result))))}},multiplePhotoChangeHandler:function(e){e.preventDefault();var t=e.currentTarget.files?e.currentTarget.files[0]:null,a=new FileReader;t&&a.readAsDataURL(t),a.onload=function(){A(Object(l.a)(Object(l.a)({},d),{},{vehicle_photo_files:[].concat(Object(c.a)(d.vehicle_photo_files),["".concat(a.result)])}))}},handleSubmit:W,setDateChange:m,selectedDate:h,vehicles:O,inspectionPoints:w,error:F,disable:M}),M&&Object(N.jsx)(z.a,{valueText:q})]})};t.default=function(){return Object(N.jsx)(I,{})}}}]);
//# sourceMappingURL=9.358701b4.chunk.js.map